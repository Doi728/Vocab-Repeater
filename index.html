<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>üåßÔ∏è Vocab Repeater ‚òî</title>
  <style>
    :root {
      --main-bg: #e0eaf0;
      --accent: #c5d8e4;
      --accent2: #dce9f2;
      --accent3: #f0f6fa;
      --text: #2e3a40;
      --button: #88a8c6;
      --button-text: #ffffff;
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      background: var(--main-bg);
      color: var(--text);
    }
    header {
      background: var(--button);
      color: var(--button-text);
      padding: 15px;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
    }
    nav {
      display: flex;
      justify-content: space-around;
      background: var(--accent);
    }
    nav button {
      flex: 1;
      padding: 12px;
      background: var(--accent);
      border: none;
      font-size: 16px;
      cursor: pointer;
    }
    nav button.active {
      background: var(--accent2);
      font-weight: bold;
    }
    section {
      padding: 20px;
    }
    input, textarea {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      font-size: 16px;
      border: 1px solid #b0c4d4;
      border-radius: 8px;
      background: #f9fbfc;
    }
    button {
      padding: 10px 15px;
      font-size: 16px;
      background: var(--button);
      color: var(--button-text);
      border: none;
      border-radius: 6px;
      margin: 5px 0;
      cursor: pointer;
    }
    .card {
      background: var(--accent3);
      padding: 12px;
      margin: 10px 0;
      border-left: 6px solid var(--button);
      border-radius: 6px;
      box-shadow: 0 1px 5px rgba(0,0,0,0.05);
    }
    .card small {
      display: block;
      color: gray;
      margin-top: 4px;
    }
    .search {
      margin: 10px 0;
    }
    @media screen and (max-width: 600px) {
      header {
        font-size: 20px;
        padding: 10px;
      }
      nav button {
        font-size: 14px;
        padding: 10px;
      }
      section {
        padding: 15px;
      }
      input, textarea {
        font-size: 14px;
      }
      button {
        font-size: 14px;
        padding: 8px 12px;
      }
      .card {
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <header>üåßÔ∏è Vocab Repeater ‚òî</header>
  <nav>
    <button onclick="showPage('add')" class="active">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏®‡∏±‡∏û‡∏ó‡πå</button>
    <button onclick="showPage('review')">üîÅ ‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô</button>
    <button onclick="showPage('list')">üìò ‡∏Ñ‡∏•‡∏±‡∏á‡∏®‡∏±‡∏û‡∏ó‡πå</button>
    <button onclick="showPage('quiz')">üìù ‡∏Ñ‡∏ß‡∏¥‡∏ã</button> <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏ß‡∏¥‡∏ã -->
  </nav>

  <section id="add">
    <h2>‚òî ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡πÉ‡∏´‡∏°‡πà</h2>
    <input type="text" id="word" placeholder="‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå" />
    <textarea id="definition" placeholder="‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ / ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á"></textarea>
    <button onclick="addVocab()">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
  </section>

  <section id="review" style="display:none">
    <h2>üåßÔ∏è ‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô</h2>
    <div id="reviewList"></div>
  </section>

  <section id="list" style="display:none">
    <h2>üìö ‡∏Ñ‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
    <input type="text" id="searchBox" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ñ‡∏≥" class="search" oninput="renderAllList()" />
    <div>
      <button onclick="shuffleList()">üîÄ ‡∏™‡∏∏‡πà‡∏°</button>
    </div>
    <div id="allList"></div>
  </section>

  <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏° section ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö quiz -->
  <section id="quiz" style="display:none">
    <h2>üìù ‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≠‡∏ö</h2>
    <div id="quizBox"></div>
  </section>

  <script>
    const VOCAB_KEY = 'vocab_list_v2'
    const intervals = [1800, 3600, 43200, 86400, 259200, 604800, 1209600, 2592000]

    // ‡∏î‡∏∂‡∏á‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏à‡∏≤‡∏Å localStorage
    function getVocab() {
      return JSON.parse(localStorage.getItem(VOCAB_KEY) || '[]')
    }
    function saveVocab(data) {
      localStorage.setItem(VOCAB_KEY, JSON.stringify(data))
    }

    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå
    function addVocab() {
      const word = document.getElementById('word').value.trim()
      const def = document.getElementById('definition').value.trim()
      if (!word) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå")
      const vocab = getVocab()
      vocab.push({ word, def, created: Date.now(), nextReview: Date.now() + intervals[0] * 1000, step: 0 })
      saveVocab(vocab)
      document.getElementById('word').value = ''
      document.getElementById('definition').value = ''
      alert("‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡πÅ‡∏•‡πâ‡∏ß!")
    }

    // ‡∏•‡∏ö‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå
    function deleteVocab(word) {
      if (!confirm(`‡∏•‡∏ö "${word}" ‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°?`)) return;
      let vocab = getVocab().filter(v => v.word !== word)
      saveVocab(vocab)
      renderAllList()
    }

    // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô
    function renderReviewList() {
      const now = Date.now()
      const vocab = getVocab()
      const reviewList = vocab.filter(v => now >= v.nextReview)
      const container = document.getElementById('reviewList')
      container.innerHTML = ''
      if (reviewList.length === 0) {
        container.innerHTML = "<p>‚è≥ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</p>"
        return
      }
      reviewList.forEach((v, i) => {
        const card = document.createElement('div')
        card.className = 'card'
        const id = `def_${i}`
        card.innerHTML = `
          <b>${v.word}</b>
          <div id="${id}" style="display:none; margin-top:8px;">${v.def}</div>
          <button onclick="document.getElementById('${id}').style.display='block'">üëÅÔ∏è ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢</button>
          <div style="margin-top:8px;">
            <button onclick="markReview('${v.word}', 'easy')">üòÑ ‡∏à‡∏≥‡πÑ‡∏î‡πâ</button>
            <button onclick="markReview('${v.word}', 'medium')">ü§î ‡∏•‡∏≤‡∏á‡πÜ</button>
            <button onclick="markReview('${v.word}', 'hard')">üòµ ‡∏à‡∏≥‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ</button>
          </div>
        `
        container.appendChild(card)
      })
    }

    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô
    function markReview(word, level) {
      let vocab = getVocab().map(v => {
        if (v.word === word) {
          if (level === 'easy') v.step = Math.min(v.step + 1, intervals.length - 1)
          else if (level === 'hard') v.step = Math.max(v.step - 1, 0)
          v.nextReview = Date.now() + intervals[v.step] * 1000
        }
        return v
      })
      saveVocab(vocab)
      renderReviewList()
    }

    // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏•‡∏±‡∏á‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    function renderAllList() {
      const all = getVocab()
      const query = document.getElementById('searchBox').value.toLowerCase()
      const filtered = all.filter(v => v.word.toLowerCase().includes(query))
      const container = document.getElementById('allList')
      container.innerHTML = ''
      if (filtered.length === 0) {
        container.innerHTML = "<p>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå</p>"
        return
      }
      filtered.forEach(v => {
        const nextMs = v.nextReview - Date.now()
        const nextMin = Math.round(nextMs / 60000)
        const hr = Math.floor(nextMin / 60)
        const min = nextMin % 60
        const timeStr = nextMin <= 0 ? '‡πÄ‡∏£‡πá‡∏ß‡πÜ ‡∏ô‡∏µ‡πâ' :
          (hr > 0 ? `${hr} ‡∏ä‡∏°. ${min} ‡∏ô‡∏≤‡∏ó‡∏µ` : `${min} ‡∏ô‡∏≤‡∏ó‡∏µ`)
        const card = document.createElement('div')
        card.className = 'card'
        card.innerHTML = `
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <div>
              <b>${v.word}</b>
              <div>${v.def}</div>
              <small>‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡πÉ‡∏ô‡∏≠‡∏µ‡∏Å ${timeStr}</small>
            </div>
            <button onclick="deleteVocab('${v.word}')" style="margin-left:10px">üóëÔ∏è</button>
          </div>
        `
        container.appendChild(card)
      })
    }

    // ‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡πÉ‡∏ô‡∏Ñ‡∏•‡∏±‡∏á
    function shuffleList() {
      let vocab = getVocab()
      vocab.sort(() => Math.random() - 0.5)
      saveVocab(vocab)
      renderAllList()
    }

    // ‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏õ‡∏∏‡πà‡∏° active
    function showPage(page) {
      const pages = ['add', 'review', 'list', 'quiz']
      pages.forEach(id => {
        document.getElementById(id).style.display = id === page ? 'block' : 'none'
      })
      document.querySelectorAll('nav button').forEach(btn => {
        btn.classList.toggle('active', btn.textContent.includes(
          page === 'add' ? '‡πÄ‡∏û‡∏¥‡πà‡∏°' :
          page === 'review' ? '‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô' :
          page === 'list' ? '‡∏Ñ‡∏•‡∏±‡∏á' : '‡∏Ñ‡∏ß‡∏¥‡∏ã'
        ))
      })

      if (page === 'review') renderReviewList()
      if (page === 'list') renderAllList()
      if (page === 'quiz') renderQuiz()
    }

    // --- ‡πÇ‡∏Ñ‡πâ‡∏î quiz & ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏∞‡∏™‡∏° ---

    const SCORE_KEY = 'vocab_quiz_score'

    // ‡∏î‡∏∂‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏∞‡∏™‡∏°
    function getScore() {
      return parseInt(localStorage.getItem(SCORE_KEY) || '0')
    }

    // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏∞‡∏™‡∏°
    function saveScore(score) {
      localStorage.setItem(SCORE_KEY, score)
    }

    // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° quiz ‡πÅ‡∏ö‡∏ö multiple choice
    function renderQuiz() {
      const vocab = getVocab()
      if (vocab.length < 4) {
        document.getElementById('quizBox').innerHTML = "<p>‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ñ‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 4 ‡∏Ñ‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏¥‡∏ã</p>"
        return
      }

      // ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö 4 ‡∏Ñ‡∏≥
      const choices = [...vocab].sort(() => Math.random() - 0.5).slice(0, 4)
      // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á 1 ‡∏Ñ‡∏≥‡∏à‡∏≤‡∏Å 4 ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
      const answer = choices[Math.floor(Math.random() * 4)]
      const score = getScore()

      document.getElementById('quizBox').innerHTML = `
        <p>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏∞‡∏™‡∏°: ${score} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</p>
        <p><b>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢:</b> ${answer.def}</p>
        ${choices.map(c => `<button onclick="checkAnswer('${c.word}', '${answer.word}')">${c.word}</button>`).join('<br><br>')}
      `
    }

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö quiz
    function checkAnswer(selected, correct) {
      let score = getScore()
      if (selected === correct) {
        alert("‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!")
        score += 1
      } else {
        alert(`‚ùå ‡∏ú‡∏¥‡∏î ‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏∑‡∏≠: ${correct}`)
        score -= 1 // ‡∏•‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏¥‡∏î ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡∏•‡∏ö
      }
      saveScore(score)
      renderQuiz()
    }

    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤ add
    showPage('add')
  </script>
</body>
</html>
